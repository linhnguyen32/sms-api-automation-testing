{
	"info": {
		"_postman_id": "74685b45-36ac-49eb-a990-b57ced3bc230",
		"name": "Demo Flow - 7 APIs",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "40651347",
		"_collection_link": "https://linh33.postman.co/workspace/do_an~ea3f6551-7a00-472c-92b2-d24bd8bc4197/collection/40651347-74685b45-36ac-49eb-a990-b57ced3bc230?action=share&source=collection_link&creator=40651347"
	},
	"item": [
		{
			"name": "01 Login Copy",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// 1. Kiểm tra HTTP status\r",
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"// 2. Kiểm tra giá trị nghiệp vụ\r",
							"pm.test(\"Login message is correct\", function () {\r",
							"    pm.expect(pm.response.json().message).to.eql(\"Login success\");\r",
							"});\r",
							"pm.test(\"Status code is 401\", function () {\r",
							"    pm.response.to.have.status(401);\r",
							"});\r",
							"// 3. Không gửi Authorization header\r",
							"pm.test(\"Unauthorized message returned\", function () {\r",
							"    pm.expect(pm.response.json().message)\r",
							"      .to.include(\"Unauthorized\");\r",
							"});\r",
							"// 4. Kiểm tra hệ thống bảo mật API\r",
							"pm.test(\"Status code is 403\", function () {\r",
							"    pm.response.to.have.status(403);\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"url": {
					"raw": "{{base_url}}/auth/login",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"auth",
						"login"
					]
				}
			},
			"response": [
				{
					"name": "Login Success",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"login"
							]
						}
					},
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json",
							"description": "",
							"type": "text"
						}
					],
					"cookie": [],
					"body": "{\r\n  \"code\": 200,\r\n  \"message\": \"Login success\",\r\n  \"data\": {\r\n    \"token\": \"mock_access_token_123\",\r\n    \"refreshToken\": \"mock_refresh_token_123\"\r\n  }\r\n}\r\n"
				}
			]
		},
		{
			"name": "07 Get Students Copy",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// 1. Kiểm tra HTTP status\r",
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"// 2. Kiểm tra response là JSON hợp lệ\r",
							"pm.test(\"Response is valid JSON\", function () {\r",
							"    pm.response.to.be.json;\r",
							"});\r",
							"\r",
							"// 3. Kiểm tra cấu trúc response\r",
							"pm.test(\"Response has student list\", function () {\r",
							"    const jsonData = pm.response.json();\r",
							"\r",
							"    pm.expect(jsonData).to.have.property(\"code\", 200);\r",
							"    pm.expect(jsonData).to.have.property(\"data\");\r",
							"    pm.expect(jsonData.data).to.be.an(\"array\");\r",
							"    pm.expect(jsonData.data.length).to.be.above(0);\r",
							"});\r",
							"\r",
							"// 4. Kiểm tra schema của 1 student\r",
							"pm.test(\"Student object structure is correct\", function () {\r",
							"    const student = pm.response.json().data[0];\r",
							"\r",
							"    pm.expect(student).to.have.property(\"id\");\r",
							"    pm.expect(student).to.have.property(\"studentCode\");\r",
							"    pm.expect(student).to.have.property(\"fullName\");\r",
							"    pm.expect(student).to.have.property(\"email\");\r",
							"    pm.expect(student).to.have.property(\"status\");\r",
							"});\r",
							"\r",
							"// 5. Kiểm tra dữ liệu nghiệp vụ\r",
							"pm.test(\"Student status is valid\", function () {\r",
							"    const status = pm.response.json().data[0].status;\r",
							"    pm.expect([\"ACTIVE\", \"INACTIVE\"]).to.include(status);\r",
							"});\r",
							"\r",
							"// 6. Lưu student_id cho API tiếp theo\r",
							"const studentId = pm.response.json().data[0].id;\r",
							"pm.environment.set(\"student_id\", studentId);\r",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/students",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"students"
					]
				}
			},
			"response": [
				{
					"name": "07 Get Students",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/students",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"students"
							]
						}
					},
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json",
							"description": "",
							"type": "text"
						}
					],
					"cookie": [
						{
							"expires": "Invalid Date",
							"domain": "",
							"path": ""
						}
					],
					"body": "{\r\n  \"code\": 200,\r\n  \"data\": [\r\n    {\r\n      \"id\": 1001,\r\n      \"studentCode\": \"SV1001\",\r\n      \"fullName\": \"Nguyen Phuong Linh\",\r\n      \"email\": \"linhp@test.com\",\r\n      \"status\": \"ACTIVE\"\r\n    }\r\n  ]\r\n}\r\n"
				}
			]
		},
		{
			"name": "09 Create Student Copy",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// 1. Kiểm tra HTTP status\r",
							"pm.test(\"Status code is 201\", function () {\r",
							"    pm.response.to.have.status(201);\r",
							"});\r",
							"\r",
							"// 2. Kiểm tra response là JSON\r",
							"pm.test(\"Response is valid JSON\", function () {\r",
							"    pm.response.to.be.json;\r",
							"});\r",
							"\r",
							"// 3. Kiểm tra cấu trúc response\r",
							"pm.test(\"Create student response structure is correct\", function () {\r",
							"    const jsonData = pm.response.json();\r",
							"\r",
							"    pm.expect(jsonData).to.have.property(\"code\", 201);\r",
							"    pm.expect(jsonData).to.have.property(\"message\");\r",
							"    pm.expect(jsonData).to.have.property(\"data\");\r",
							"\r",
							"    pm.expect(jsonData.data).to.have.property(\"id\");\r",
							"    pm.expect(jsonData.data).to.have.property(\"studentCode\");\r",
							"});\r",
							"\r",
							"// 4. Kiểm tra message nghiệp vụ\r",
							"pm.test(\"Create student message is correct\", function () {\r",
							"    pm.expect(pm.response.json().message)\r",
							"        .to.eql(\"Student created successfully\");\r",
							"});\r",
							"\r",
							"// 5. Kiểm tra thiếu email\r",
							"pm.test(\"Validation error\", function () {\r",
							"    pm.response.to.have.status(400);\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{ \"studentCode\": \"SV1002\", \"fullName\": \"Nguyen Van A\", \"email\": \"sv1002@test.com\" }"
				},
				"url": {
					"raw": "{{base_url}}/students",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"students"
					]
				}
			},
			"response": [
				{
					"name": "Create Student success",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/students",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"students"
							]
						}
					},
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json",
							"description": "",
							"type": "text"
						}
					],
					"cookie": [],
					"body": "{\r\n  \"code\": 201,\r\n  \"message\": \"Student created successfully\",\r\n  \"data\": {\r\n    \"id\": 1002,\r\n    \"studentCode\": \"SV1002\"\r\n  }\r\n}\r\n"
				}
			]
		},
		{
			"name": "35 Get Enrollments By Student Copy",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// 1. Kiểm tra HTTP status\r",
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"// 2. Kiểm tra Student không tồn tại\r",
							"pm.test(\"Student not found\", function () {\r",
							"    pm.response.to.have.status(404);\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/enrollments/student/{{student_id}}",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"enrollments",
						"student",
						"{{student_id}}"
					]
				}
			},
			"response": [
				{
					"name": "35 Get Enrollments By Student",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/enrollments/student/{{student_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"enrollments",
								"student",
								"{{student_id}}"
							]
						}
					},
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json",
							"description": "",
							"type": "text"
						}
					],
					"cookie": [
						{
							"expires": "Invalid Date",
							"domain": "",
							"path": ""
						}
					],
					"body": "{\r\n  \"code\": 200,\r\n  \"data\": []\r\n}\r\n"
				}
			]
		},
		{
			"name": "39 Get Grades By Student Copy",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// 1. Kiểm tra HTTP status\r",
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"// 2. Kiểm tra response là JSON\r",
							"pm.test(\"Response is valid JSON\", function () {\r",
							"    pm.response.to.be.json;\r",
							"});\r",
							"\r",
							"// 3. Kiểm tra cấu trúc response\r",
							"pm.test(\"Grades response structure is correct\", function () {\r",
							"    const jsonData = pm.response.json();\r",
							"\r",
							"    pm.expect(jsonData).to.have.property(\"code\", 200);\r",
							"    pm.expect(jsonData).to.have.property(\"data\");\r",
							"    pm.expect(jsonData.data).to.have.property(\"studentId\");\r",
							"    pm.expect(jsonData.data).to.have.property(\"grades\");\r",
							"    pm.expect(jsonData.data.grades).to.be.an(\"array\");\r",
							"    pm.expect(jsonData.data.grades.length).to.be.above(0);\r",
							"});\r",
							"\r",
							"// 4. Kiểm tra liên kết studentId\r",
							"pm.test(\"Grades belong to correct student\", function () {\r",
							"    const studentId = pm.response.json().data.studentId;\r",
							"    pm.expect(studentId).to.eql(\r",
							"        parseInt(pm.environment.get(\"student_id\"))\r",
							"    );\r",
							"});\r",
							"\r",
							"// 5. Kiểm tra cấu trúc từng grade\r",
							"pm.test(\"Grade object structure is valid\", function () {\r",
							"    const grade = pm.response.json().data.grades[0];\r",
							"\r",
							"    pm.expect(grade).to.have.property(\"courseCode\");\r",
							"    pm.expect(grade).to.have.property(\"midterm\");\r",
							"    pm.expect(grade).to.have.property(\"final\");\r",
							"    pm.expect(grade).to.have.property(\"total\");\r",
							"});\r",
							"\r",
							"// 6. Kiểm tra nghiệp vụ điểm số\r",
							"pm.test(\"Grade values are within valid range\", function () {\r",
							"    const grade = pm.response.json().data.grades[0];\r",
							"\r",
							"    pm.expect(grade.midterm).to.be.within(0, 10);\r",
							"    pm.expect(grade.final).to.be.within(0, 10);\r",
							"    pm.expect(grade.total).to.be.within(0, 10);\r",
							"});\r",
							"\r",
							"// 7. Lưu courseCode (nếu cần cho API sau)\r",
							"pm.environment.set(\r",
							"    \"course_code\",\r",
							"    pm.response.json().data.grades[0].courseCode\r",
							");\r",
							"// 8. Kiểm tra Student chưa đăng ký môn\r",
							"pm.test(\"Grades array exists\", function () {\r",
							"    pm.expect(pm.response.json().data.grades).to.be.an(\"array\");\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/grades/student/{{student_id}}",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"grades",
						"student",
						"{{student_id}}"
					]
				}
			},
			"response": [
				{
					"name": "Get Grades By Student",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/grades/student/{{student_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"grades",
								"student",
								"{{student_id}}"
							]
						}
					},
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json",
							"description": "",
							"type": "text"
						}
					],
					"cookie": [],
					"body": "{\r\n  \"code\": 200,\r\n  \"data\": {\r\n    \"studentId\": 1002,\r\n    \"grades\": [\r\n      {\r\n        \"courseCode\": \"CS101\",\r\n        \"midterm\": 8.0,\r\n        \"final\": 9.0,\r\n        \"total\": 8.7\r\n      }\r\n    ]\r\n  }\r\n}\r\n"
				}
			]
		},
		{
			"name": "45 Get Tuition By Student Copy",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// 1. Kiểm tra HTTP status\r",
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"// 2. Kiểm tra response là JSON\r",
							"pm.test(\"Response is valid JSON\", function () {\r",
							"    pm.response.to.be.json;\r",
							"});\r",
							"\r",
							"// 3. Kiểm tra cấu trúc response\r",
							"pm.test(\"Tuition response structure is correct\", function () {\r",
							"    const jsonData = pm.response.json();\r",
							"\r",
							"    pm.expect(jsonData).to.have.property(\"code\", 200);\r",
							"    pm.expect(jsonData).to.have.property(\"data\");\r",
							"\r",
							"    pm.expect(jsonData.data).to.have.property(\"studentId\");\r",
							"    pm.expect(jsonData.data).to.have.property(\"totalTuition\");\r",
							"    pm.expect(jsonData.data).to.have.property(\"paid\");\r",
							"    pm.expect(jsonData.data).to.have.property(\"remaining\");\r",
							"    pm.expect(jsonData.data).to.have.property(\"currency\");\r",
							"});\r",
							"\r",
							"// 4. Kiểm tra liên kết studentId\r",
							"pm.test(\"Tuition belongs to correct student\", function () {\r",
							"    const studentId = pm.response.json().data.studentId;\r",
							"    pm.expect(studentId).to.eql(\r",
							"        parseInt(pm.environment.get(\"student_id\"))\r",
							"    );\r",
							"});\r",
							"\r",
							"// 5. Kiểm tra nghiệp vụ học phí\r",
							"pm.test(\"Tuition calculation is correct\", function () {\r",
							"    const data = pm.response.json().data;\r",
							"\r",
							"    pm.expect(data.totalTuition).to.be.a(\"number\");\r",
							"    pm.expect(data.paid).to.be.a(\"number\");\r",
							"    pm.expect(data.remaining).to.be.a(\"number\");\r",
							"\r",
							"    pm.expect(data.totalTuition).to.eql(data.paid + data.remaining);\r",
							"});\r",
							"\r",
							"// 6. Kiểm tra đơn vị tiền tệ\r",
							"pm.test(\"Currency is VND\", function () {\r",
							"    pm.expect(pm.response.json().data.currency).to.eql(\"VND\");\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/tuitions/student/{{student_id}}",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"tuitions",
						"student",
						"{{student_id}}"
					]
				}
			},
			"response": [
				{
					"name": "Get Tuition By Student",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/tuitions/student/{{student_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"tuitions",
								"student",
								"{{student_id}}"
							]
						}
					},
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json",
							"description": "",
							"type": "text"
						}
					],
					"cookie": [],
					"body": "{\n    \"code\": 200,\n    \"data\": {\n        \"studentId\": 1002,\n        \"totalTuition\": 5000000,\n        \"paid\": 3000000,\n        \"remaining\": 2000000,\n        \"currency\": \"VND\"\n    }\n}"
				}
			]
		},
		{
			"name": "52 Health Check Copy",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// 1. Kiểm tra HTTP status\r",
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"// 2. Kiểm tra response là JSON\r",
							"pm.test(\"Response is valid JSON\", function () {\r",
							"    pm.response.to.be.json;\r",
							"});\r",
							"\r",
							"// 3. Kiểm tra cấu trúc response\r",
							"pm.test(\"Health check response structure is correct\", function () {\r",
							"    const jsonData = pm.response.json();\r",
							"\r",
							"    pm.expect(jsonData).to.have.property(\"code\", 200);\r",
							"    pm.expect(jsonData).to.have.property(\"status\");\r",
							"    pm.expect(jsonData).to.have.property(\"timestamp\");\r",
							"});\r",
							"\r",
							"// 4. Kiểm tra trạng thái hệ thống\r",
							"pm.test(\"System status is UP\", function () {\r",
							"    pm.expect(pm.response.json().status).to.eql(\"UP\");\r",
							"});\r",
							"\r",
							"// 5. Kiểm tra định dạng timestamp (ISO 8601)\r",
							"pm.test(\"Timestamp format is valid ISO 8601\", function () {\r",
							"    const timestamp = pm.response.json().timestamp;\r",
							"    const isoRegex = /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$/;\r",
							"    pm.expect(timestamp).to.match(isoRegex);\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/health",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"health"
					]
				}
			},
			"response": [
				{
					"name": "System Health OK",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/health",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"health"
							]
						}
					},
					"_postman_previewlanguage": null,
					"header": null,
					"cookie": [],
					"body": "{\r\n  \"code\": 200,\r\n  \"status\": \"UP\",\r\n  \"timestamp\": \"2025-06-30T10:00:00Z\"\r\n}\r\n"
				}
			]
		}
	]
}